{
  "api": {
    "name": "Anikii API",
    "version": "1.1",
    "baseUrl": "/",
    "envelope": {
      "success": {
        "status": {"code": 200, "success": true, "message": "OK"},
        "request": {"id": "string", "timestamp": "ISO-8601", "method": "GET|POST", "path": "string", "query": {"key": "value"}},
        "meta": {},
        "data": {}
      },
      "error": {
        "status": {"code": "4xx|5xx", "success": false, "message": "string"},
        "request": {},
        "meta": {},
        "data": null,
        "error": {"type": "string", "detail": "string (only in DEBUG mode)"}
      }
    },
    "security": {
      "rateLimit": "60 requests per minute (default)",
      "auth": {
        "admin": "X-API-Key header required for admin routes"
      }
    },
    "routes": [
      {
        "path": "/",
        "method": "GET",
        "description": "Home endpoint with greetings and list of available routes",
        "query": {},
        "params": {},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": {"api": {"name": "Anikii API", "version": "1.1"}}},
        "responseSchema": {"data": "object"},
        "pagination": null,
        "auth": null,
        "failures": ["none"],
        "performance": ["lightweight"]
      },
      {
        "path": "/popular",
        "method": "GET",
        "description": "Fetch popular anime (paginated)",
        "query": {"page": {"type": "number", "default": 1, "min": 1, "max": 50}},
        "params": {},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/popular?page=1"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "meta": {"pagination": {"currentPage": 1, "lastPage": 20}}, "data": [{"id": 1, "title": "..."}]},
        "responseSchema": {"meta.pagination": {"currentPage": "number", "lastPage": "number"}, "data": "AnimeItem[]"},
        "pagination": {"page": "number"},
        "auth": null,
        "failures": ["AniList errors", "network error"],
        "performance": ["cached"]
      },
      {
        "path": "/popular/upcoming",
        "method": "GET",
        "description": "Fetch upcoming popular anime (paginated)",
        "query": {"page": {"type": "number", "default": 1}},
        "params": {},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/popular/upcoming?page=1"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "meta": {"pagination": {"currentPage": 1, "lastPage": 10}}, "data": [{"id": 2, "title": "..."}]},
        "responseSchema": {"meta.pagination": {"currentPage": "number", "lastPage": "number"}, "data": "AnimeItem[]"},
        "pagination": {"page": "number"},
        "auth": null,
        "failures": ["AniList errors"],
        "performance": ["cached"]
      },
      {
        "path": "/popular/releases",
        "method": "GET",
        "description": "Fetch popular releases (paginated)",
        "query": {"page": {"type": "number", "default": 1}},
        "params": {},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/popular/releases?page=1"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "meta": {"pagination": {"currentPage": 1, "lastPage": 5}}, "data": [{"id": 3, "title": "..."}]},
        "responseSchema": {"meta.pagination": {"currentPage": "number", "lastPage": "number"}, "data": "AnimeItem[]"},
        "pagination": {"page": "number"},
        "auth": null,
        "failures": ["AniList errors"],
        "performance": ["cached"]
      },
      {
        "path": "/popular/releases/seasons",
        "method": "GET",
        "description": "Fetch seasonal releases (paginated). Optional season/year filters.",
        "query": {
          "page": {"type": "number", "default": 1},
          "season": {"type": "string", "optional": true},
          "year": {"type": "number", "optional": true}
        },
        "params": {},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/popular/releases/seasons?page=1&season=FALL&year=2024"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "meta": {"pagination": {"currentPage": 1, "lastPage": 5}}, "data": [{"id": 4, "title": "..."}]},
        "responseSchema": {"meta.pagination": {"currentPage": "number", "lastPage": "number"}, "data": "AnimeItem[]"},
        "pagination": {"page": "number"},
        "auth": null,
        "failures": ["AniList errors"],
        "performance": ["cached"]
      },
      {
        "path": "/anime/{id}",
        "method": "GET",
        "description": "Fetch detailed info for a specific anime",
        "query": {},
        "params": {"id": {"type": "number"}},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/anime/1"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": {"id": 1, "title": {"english": "..."}}},
        "responseSchema": {"data": "AnimeDetails"},
        "pagination": null,
        "auth": null,
        "failures": ["AniList errors", "Not found"],
        "performance": ["moderate"]
      },
      {
        "path": "/anime/{id}/episodes",
        "method": "GET",
        "description": "Fetch the full list of episodes for a specific anime from GogoAnime",
        "query": {},
        "params": {"id": {"type": "number"}},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/anime/1/episodes"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": [{"number": "1", "url": "...", "category": "SUB", "title": "..."}]},
        "responseSchema": {"data": "EpisodeListItem[]"},
        "pagination": null,
        "auth": null,
        "failures": ["Anime not found", "Scraping failure"],
        "performance": ["network-bound"]
      },
      {
        "path": "/anime/{id}/stream",
        "method": "GET",
        "description": "Fetch streaming metadata from AniList",
        "query": {},
        "params": {"id": {"type": "number"}},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/anime/1/stream"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": {"id": 1, "streamingEpisodes": []}},
        "responseSchema": {"data": "AnilistMedia"},
        "pagination": null,
        "auth": null,
        "failures": ["AniList errors"],
        "performance": ["fast"]
      },
      {
        "path": "/anime/{id}/stream/{ep}",
        "method": "GET",
        "description": "Fetch streaming links for a specific episode",
        "query": {
          "type": {"type": "string", "default": "sub", "enum": ["sub", "dub"]},
          "provider": {"type": "string", "optional": true}
        },
        "params": {"id": {"type": "number"}, "ep": {"type": "number"}},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/anime/1/stream/1?type=sub"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": {"episode_info": {"title": "..."}, "stream_links": [{"name": "direct", "url": "..."}]}},
        "responseSchema": {"data": "EpisodeData"},
        "pagination": null,
        "auth": null,
        "failures": ["Episode not found", "Resolution failure"],
        "performance": ["network-bound"]
      },
      {
        "path": "/anime/{id}/stream/{ep}/live",
        "method": "GET",
        "description": "Proxy video stream for live playback",
        "query": {
          "type": {"type": "string", "default": "sub"},
          "provider": {"type": "string", "optional": true}
        },
        "params": {"id": {"type": "number"}, "ep": {"type": "number"}},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/anime/1/stream/1/live"},
        "exampleResponse": "binary-stream",
        "responseSchema": "binary",
        "pagination": null,
        "auth": null,
        "failures": ["Stream not found"],
        "performance": ["continuous stream"]
      },
      {
        "path": "/anime/{id}/stream/{ep}/download",
        "method": "GET",
        "description": "Proxy video stream for download",
        "query": {
          "type": {"type": "string", "default": "sub"},
          "provider": {"type": "string", "optional": true}
        },
        "params": {"id": {"type": "number"}, "ep": {"type": "number"}},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/anime/1/stream/1/download"},
        "exampleResponse": "binary-stream",
        "responseSchema": "binary",
        "pagination": null,
        "auth": null,
        "failures": ["Stream not found"],
        "performance": ["large payload"]
      },
      {
        "path": "/search",
        "method": "GET",
        "description": "Search for anime by keyword",
        "query": {
          "keyword": {"type": "string", "required": true},
          "page": {"type": "number", "default": 1}
        },
        "params": {},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/search?keyword=naruto&page=1"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "meta": {"pagination": {"currentPage": 1, "lastPage": 10}}, "data": [{"id": 1, "title": "..."}]},
        "responseSchema": {"meta.pagination": {"currentPage": "number", "lastPage": "number"}, "data": "AnimeItem[]"},
        "pagination": {"page": "number"},
        "auth": null,
        "failures": ["AniList errors"],
        "performance": ["fast"]
      },
      {
        "path": "/genres",
        "method": "GET",
        "description": "List all available genres",
        "query": {},
        "params": {},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/genres"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": ["Action", "Adventure"]},
        "responseSchema": {"data": "string[]"},
        "pagination": null,
        "auth": null,
        "failures": ["none"],
        "performance": ["cached"]
      },
      {
        "path": "/genres/{genre}",
        "method": "GET",
        "description": "Fetch anime for a specific genre",
        "query": {"page": {"type": "number", "default": 1}},
        "params": {"genre": {"type": "string"}},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/genres/Action?page=1"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "meta": {"pagination": {"currentPage": 1, "lastPage": 50}}, "data": [{"id": 1, "title": "..."}]},
        "responseSchema": {"meta.pagination": {"currentPage": "number", "lastPage": "number"}, "data": "AnimeItem[]"},
        "pagination": {"page": "number"},
        "auth": null,
        "failures": ["AniList errors"],
        "performance": ["cached"]
      },
      {
        "path": "/fyp",
        "method": "POST",
        "description": "Fetch personalized recommendations based on a collection of anime IDs",
        "query": {"page": {"type": "number", "default": 1}},
        "params": {},
        "body": {"collection": "string[]"},
        "exampleRequest": {"method": "POST", "url": "/fyp", "json": {"collection": ["1", "2"]}},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": [{"id": 3, "title": "..."}]},
        "responseSchema": {"data": "AnimeItem[]"},
        "pagination": {"page": "number"},
        "auth": null,
        "failures": ["AniList errors"],
        "performance": ["moderate"]
      },
      {
        "path": "/admin/saved",
        "method": "GET",
        "description": "List saved data in local storage and MongoDB (Admin only)",
        "query": {},
        "params": {},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/admin/saved", "headers": {"X-API-Key": "..."}},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": {"files": {"local": [], "db": []}}},
        "responseSchema": {"data": "object"},
        "pagination": null,
        "auth": "X-API-Key",
        "failures": ["Unauthorized", "DB errors"],
        "performance": ["moderate"]
      }
    ]
  }
}
