{
  "api": {
    "name": "Anikii API",
    "version": "1.0",
    "baseUrl": "/",
    "envelope": {
      "success": {
        "status": {"code": 200, "success": true, "message": "OK"},
        "request": {"id": "string", "timestamp": "ISO-8601", "method": "GET|POST", "path": "string", "query": {"key": "value"}},
        "meta": {},
        "data": {}
      },
      "error": {
        "status": {"code": "4xx", "success": false, "message": "string"},
        "request": {},
        "meta": {},
        "data": null,
        "error": {}
      }
    },
    "routes": [
      {
        "path": "/",
        "method": "GET",
        "description": "Home endpoint with greetings and list of available routes",
        "query": {},
        "params": {},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": {"message": ["..."], "terms_of_use": ["..."], "endpoints": [{"endpoint": "/popular", "description": "..."}], "liveurl": "https://api-anikii.onrender.com/"}},
        "responseSchema": {"data": {"message": "string[]", "terms_of_use": "string[]", "endpoints": "{endpoint:string,description:string}[]", "liveurl": "string"}},
        "pagination": null,
        "auth": null,
        "failures": ["none"],
        "performance": ["lightweight"]
      },
      {
        "path": "/popular",
        "method": "GET",
        "description": "Fetch popular anime (paginated)",
        "query": {"page": {"type": "number", "default": 1, "min": 1, "max": 50}},
        "params": {},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/popular?page=1"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "meta": {"pagination": {"currentPage": 1, "lastPage": 20}}, "data": [{"id": 1, "title": "..."}]},
        "responseSchema": {"meta.pagination": {"currentPage": "number", "lastPage": "number"}, "data": "AnimeItem[]"},
        "pagination": {"page": "number"},
        "auth": null,
        "failures": ["AniList errors", "network error"],
        "performance": ["cached via tmp storage"]
      },
      {
        "path": "/popular/upcoming",
        "method": "GET",
        "description": "Fetch upcoming popular anime (paginated)",
        "query": {"page": {"type": "number", "default": 1}},
        "params": {},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/popular/upcoming?page=1"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "meta": {"pagination": {"currentPage": 1, "lastPage": 10}}, "data": [{"id": 2, "title": "..."}]},
        "responseSchema": {"meta.pagination": {"currentPage": "number", "lastPage": "number"}, "data": "AnimeItem[]"},
        "pagination": {"page": "number"},
        "auth": null,
        "failures": ["AniList errors"],
        "performance": ["cached"]
      },
      {
        "path": "/popular/releases",
        "method": "GET",
        "description": "Fetch popular releases (paginated)",
        "query": {"page": {"type": "number", "default": 1}},
        "params": {},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/popular/releases?page=1"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "meta": {"pagination": {"currentPage": 1, "lastPage": 5}}, "data": [{"id": 3, "title": "..."}]},
        "responseSchema": {"meta.pagination": {"currentPage": "number", "lastPage": "number"}, "data": "AnimeItem[]"},
        "pagination": {"page": "number"},
        "auth": null,
        "failures": ["AniList errors"],
        "performance": ["cached"]
      },
      {
        "path": "/popular/releases/seasons",
        "method": "GET",
        "description": "Fetch current season releases (paginated)",
        "query": {"page": {"type": "number", "default": 1}},
        "params": {},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/popular/releases/seasons?page=1"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "meta": {"pagination": {"currentPage": 1, "lastPage": 5}}, "data": [{"id": 4, "title": "..."}]},
        "responseSchema": {"meta.pagination": {"currentPage": "number", "lastPage": "number"}, "data": "AnimeItem[]"},
        "pagination": {"page": "number"},
        "auth": null,
        "failures": ["AniList errors"],
        "performance": ["cached"]
      },
      {
        "path": "/popular/releases/seasons/{season}/{year}",
        "method": "GET",
        "description": "Fetch releases for a specific season and year (paginated)",
        "query": {"page": {"type": "number", "default": 1}},
        "params": {"season": {"type": "string"}, "year": {"type": "number"}},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/popular/releases/seasons/WINTER/2024?page=1"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "meta": {"pagination": {"currentPage": 1, "lastPage": 5}}, "data": [{"id": 5, "title": "..."}]},
        "responseSchema": {"meta.pagination": {"currentPage": "number", "lastPage": "number"}, "data": "AnimeItem[]"},
        "pagination": {"page": "number"},
        "auth": null,
        "failures": ["AniList errors"],
        "performance": ["cached"]
      },
      {
        "path": "/genres",
        "method": "GET",
        "description": "Fetch all genres",
        "query": {},
        "params": {},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/genres"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": ["Action", "Comedy"]},
        "responseSchema": {"data": "string[]"},
        "pagination": null,
        "auth": null,
        "failures": ["AniList errors"],
        "performance": ["cached"]
      },
      {
        "path": "/genres/{genre}",
        "method": "GET",
        "description": "Fetch anime by genre (paginated)",
        "query": {"page": {"type": "number", "default": 1}},
        "params": {"genre": {"type": "string"}},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/genres/Action?page=1"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "meta": {"pagination": {"currentPage": 1, "lastPage": 10}}, "data": [{"id": 6, "title": "..."}]},
        "responseSchema": {"meta.pagination": {"currentPage": "number", "lastPage": "number"}, "data": "AnimeItem[]"},
        "pagination": {"page": "number"},
        "auth": null,
        "failures": ["AniList errors"],
        "performance": ["cached"]
      },
      {
        "path": "/search",
        "method": "GET",
        "description": "Search anime by keyword",
        "query": {"keyword": {"type": "string", "min": 1, "max": 100}},
        "params": {},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/search?keyword=naruto"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": [{"id": 7, "title": "Naruto"}]},
        "responseSchema": {"data": "AnimeItem[]"},
        "pagination": null,
        "auth": null,
        "failures": ["AniList errors"],
        "performance": ["fast"]
      },
      {
        "path": "/anime/{id}",
        "method": "GET",
        "description": "Fetch anime details",
        "query": {},
        "params": {"id": {"type": "number", "min": 1}},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/anime/1"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": {"id": 1, "title": {"romaji": "..."}, "coverImage": {"cover_image": "..."}}},
        "responseSchema": {"data": "AnimeDetails"},
        "pagination": null,
        "auth": null,
        "failures": ["provider mapping missing", "AniList errors"],
        "performance": ["moderate"]
      },
      {
        "path": "/anime/{id}/relations",
        "method": "GET",
        "description": "Fetch related anime/media",
        "query": {},
        "params": {"id": {"type": "number", "min": 1}},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/anime/1/relations"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": [{"id": 100, "title": {"romaji": "..."}}]},
        "responseSchema": {"data": "AnilistMediaNode[]"},
        "pagination": null,
        "auth": null,
        "failures": ["AniList errors"],
        "performance": ["fast"]
      },
      {
        "path": "/anime/{id}/trailers",
        "method": "GET",
        "description": "Fetch trailer info",
        "query": {},
        "params": {"id": {"type": "number", "min": 1}},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/anime/1/trailers"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": {"trailer": {"id": "abc", "site": "youtube"}}},
        "responseSchema": {"data": "{ trailer: Trailer }"},
        "pagination": null,
        "auth": null,
        "failures": ["AniList errors"],
        "performance": ["fast"]
      },
      {
        "path": "/anime/{id}/recommended",
        "method": "GET",
        "description": "Fetch recommended anime based on the anime ID",
        "query": {},
        "params": {"id": {"type": "number"}},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/anime/1/recommended"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": [{"id": 8, "title": {"romaji": "..."}}]},
        "responseSchema": {"data": "AnimeItem[]"},
        "pagination": null,
        "auth": null,
        "failures": ["AniList errors"],
        "performance": ["moderate"]
      },
      {
        "path": "/anime/{id}/stream",
        "method": "GET",
        "description": "Fetch streaming info for an anime (AniList Media)",
        "query": {},
        "params": {"id": {"type": "number"}},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/anime/1/stream"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": {"id": 1, "streamingEpisodes": [{"title": "Ep 1"}] }},
        "responseSchema": {"data": "AnilistMedia"},
        "pagination": null,
        "auth": null,
        "failures": ["AniList errors"],
        "performance": ["fast"]
      },
      {
        "path": "/anime/{id}/stream/external",
        "method": "GET",
        "description": "Fetch external streaming info (parsed provider)",
        "query": {"type": {"type": "string", "default": "sub"}},
        "params": {"id": {"type": "number"}},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/anime/1/stream/external?type=sub"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": {"sources": [{"name": "mp4upload", "url": "..."}] }},
        "responseSchema": {"data": "StreamingInfo"},
        "pagination": null,
        "auth": null,
        "failures": ["provider id missing", "parse failures"],
        "performance": ["network-bound"]
      },
      {
        "path": "/anime/{id}/stream/ep/{ep}",
        "method": "GET",
        "description": "Fetch streaming info for a specific episode",
        "query": {"type": {"type": "string", "default": "sub"}},
        "params": {"id": {"type": "number"}, "ep": {"type": "number"}},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/anime/1/stream/ep/1?type=sub"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": {"episode_info": {"title": "..."}, "stream_links": [{"name": "mp4upload", "url": "..."}] }},
        "responseSchema": {"data": "EpisodeData"},
        "pagination": null,
        "auth": null,
        "failures": ["episode not found"],
        "performance": ["provider resolution"]
      },
      {
        "path": "/anime/{id}/stream/ep/{ep}/download",
        "method": "GET",
        "description": "Download original video for episode",
        "query": {"type": {"type": "string", "default": "sub"}},
        "params": {"id": {"type": "number"}, "ep": {"type": "number"}},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/anime/1/stream/ep/1/download?type=sub"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": "binary-stream"},
        "responseSchema": {"data": "binary"},
        "pagination": null,
        "auth": null,
        "failures": ["mp4upload link missing", "video fetch error"],
        "performance": ["large payload"]
      },
      {
        "path": "/anime/{id}/stream/ep/{ep}/download-direct",
        "method": "GET",
        "description": "Download direct stream for episode (if available)",
        "query": {"type": {"type": "string", "default": "sub"}, "provider": {"type": "string", "optional": true}},
        "params": {"id": {"type": "number"}, "ep": {"type": "number"}},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/anime/1/stream/ep/1/download-direct?provider=gogoanime"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": "binary-stream"},
        "responseSchema": {"data": "binary"},
        "pagination": null,
        "auth": null,
        "failures": ["direct link missing"],
        "performance": ["large payload"]
      },
      {
        "path": "/anime/{id}/stream/ep/{ep}/live",
        "method": "GET",
        "description": "Live streaming of episode video",
        "query": {"type": {"type": "string", "default": "sub"}, "provider": {"type": "string", "optional": true}},
        "params": {"id": {"type": "number"}, "ep": {"type": "number"}},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/anime/1/stream/ep/1/live"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": "binary-stream"},
        "responseSchema": {"data": "binary"},
        "pagination": null,
        "auth": null,
        "failures": ["mp4upload link missing"],
        "performance": ["continuous stream"]
      },
      {
        "path": "/anime/{id}/stream/ep/{ep}/dub",
        "method": "GET",
        "description": "Fetch streaming info for Dub episode",
        "query": {},
        "params": {"id": {"type": "number"}, "ep": {"type": "number"}},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/anime/1/stream/ep/1/dub"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": {"sources": [{"name": "mp4upload", "url": "..."}] }},
        "responseSchema": {"data": "StreamingInfo"},
        "pagination": null,
        "auth": null,
        "failures": ["provider id missing"],
        "performance": ["network-bound"]
      },
      {
        "path": "/anime/{id}/stream/ep/{ep}/extra",
        "method": "GET",
        "description": "Fetch extra episode info, sub/dub sources and thumbnails",
        "query": {},
        "params": {"id": {"type": "number"}, "ep": {"type": "number"}},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/anime/1/stream/ep/1/extra"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": {"episodesSub": {}, "episodesDub": {}, "animeInfo": {"title": "...", "thumbnail": "...", "episodes": {"currentEpisode": 1, "lastEpisode": 12}}}},
        "responseSchema": {"data": "StreamExtra"},
        "pagination": null,
        "auth": null,
        "failures": ["provider id missing", "sub/dub fetch error"],
        "performance": ["network-bound"]
      },
      {
        "path": "/saved",
        "method": "GET",
        "description": "List saved data from local tmp and MongoDB",
        "query": {},
        "params": {},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/saved"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "meta": {"saved": {"local_count": 2, "db_count": 1}}, "data": {"message": "all files in temp directory", "files": {"local": ["a.json"], "db": ["name1"]}}},
        "responseSchema": {"meta.saved": {"local_count": "number", "db_count": "number"}, "data": "{message:string, files:{local:string[], db:string[]}}"},
        "pagination": null,
        "auth": null,
        "failures": ["db errors"],
        "performance": ["lightweight"]
      },
      {
        "path": "/saved",
        "method": "DELETE",
        "description": "Clear saved data in local or db",
        "query": {"storage": {"type": "string", "enum": ["local", "db"], "default": "local"}},
        "params": {},
        "body": null,
        "exampleRequest": {"method": "DELETE", "url": "/saved?storage=local"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "meta": {"saved": {"storage": "local", "cleared_count": 2}}, "data": {"message": "local storage cleared", "files": ["a.json"]}},
        "responseSchema": {"meta.saved": {"storage": "string", "cleared_count": "number"}, "data": "{message:string, files:string[]|{}}"},
        "pagination": null,
        "auth": null,
        "failures": ["db errors"],
        "performance": ["lightweight"]
      },
      {
        "path": "/savefile",
        "method": "POST",
        "description": "Save a file payload into DB",
        "query": {},
        "params": {},
        "body": {"name": "string", "data": "object|array"},
        "exampleRequest": {"method": "POST", "url": "/savefile", "json": {"name": "myfile", "data": {"key": "value"}}},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": {"message": "Item added successfully", "data": {"name": "myfile", "content": {"key": "value"}}}},
        "responseSchema": {"data": "{message:string, data:{name:string, content:any}}"},
        "pagination": null,
        "auth": null,
        "failures": ["duplicate name", "db errors"],
        "performance": ["lightweight"]
      },
      {
        "path": "/save/{name}",
        "method": "GET",
        "description": "Save specific tmp file to DB if not exists",
        "query": {},
        "params": {"name": {"type": "string"}},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/save/genres"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": {"message": "File already exists or is saved", "files": "genres.json"}},
        "responseSchema": {"data": "{message:string, files:string}"},
        "pagination": null,
        "auth": null,
        "failures": ["db errors"],
        "performance": ["lightweight"]
      },
      {
        "path": "/clearTmp/{name}",
        "method": "GET",
        "description": "Delete specific tmp file",
        "query": {},
        "params": {"name": {"type": "string"}},
        "body": null,
        "exampleRequest": {"method": "GET", "url": "/clearTmp/genres"},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "data": {"message": "genres.json has been deleted", "files": "genres.json"}},
        "responseSchema": {"data": "{message:string, files:string}"},
        "pagination": null,
        "auth": null,
        "failures": ["file not found"],
        "performance": ["lightweight"]
      },
      {
        "path": "/fyp",
        "method": "POST",
        "description": "For You Page: given list of anime IDs, returns flattened recommendations",
        "query": {"page": {"type": "number", "default": 1}},
        "params": {},
        "body": {"collection": "number[]"},
        "exampleRequest": {"method": "POST", "url": "/fyp?page=1", "json": {"collection": [1,2,3]}},
        "exampleResponse": {"status": {"code": 200, "success": true, "message": "OK"}, "meta": {"fyp": {"count": 30, "ids": [1,2,3], "page": 1}}, "data": [{"id": 100, "title": {"romaji": "...", "english": null, "native": null}, "status": "FINISHED", "coverImage": {"extraLarge": "...", "medium": "..."}, "popularity": 1000}]},
        "responseSchema": {"meta.fyp": {"count": "number", "ids": "number[]", "page": "number"}, "data": "FYPRecommendation[]"},
        "pagination": null,
        "auth": null,
        "failures": ["AniList errors"],
        "performance": ["depends on IDs count"]
      }
    ]
  }
}